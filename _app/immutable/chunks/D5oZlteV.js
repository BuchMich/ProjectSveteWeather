import{aa as z,g as W,av as Y,au as q,o as P,x as C,h as b,ak as X,p as Q,l as A,J as Z,v as ee,w as L,y as M,C as E,an as te,z as B,A as D,B as ne,aw as T,as as j,ah as R,ax as re,m as ie,ay as F,az as ae,aA as se,aq as oe,aB as ce,aC as le,aD as ue,aE as fe,al as de,u as he,S as ge,aF as pe,aG as me}from"./CQPBOp8T.js";var ye="font-weight: bold",_e="font-weight: normal";function O(e){console.warn(`%c[svelte] state_snapshot_uncloneable
%c${e?`The following properties cannot be cloned with \`$state.snapshot\` — the return value contains the originals:

${e}`:"Value cannot be cloned with `$state.snapshot` — the original value was returned"}
https://svelte.dev/e/state_snapshot_uncloneable`,ye,_e)}const we=[];function ve(e,t=!1){if(!t){const n=[],r=k(e,new Map,"",n);if(n.length===1&&n[0]==="")O();else if(n.length>0){const s=n.length>10?n.slice(0,7):n.slice(0,10),c=n.length-s.length;let i=s.map(l=>`- <value>${l}`).join(`
`);c>0&&(i+=`
- ...and ${c} more`),O(i)}return r}return k(e,new Map,"",we)}function k(e,t,n,r,s=null){if(typeof e=="object"&&e!==null){var c=t.get(e);if(c!==void 0)return c;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(z(e)){var i=Array(e.length);t.set(e,i),s!==null&&t.set(s,i);for(var l=0;l<e.length;l+=1){var g=e[l];l in e&&(i[l]=k(g,t,`${n}[${l}]`,r))}return i}if(W(e)===Y){i={},t.set(e,i),s!==null&&t.set(s,i);for(var h in e)i[h]=k(e[h],t,`${n}.${h}`,r);return i}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function")return k(e.toJSON(),t,`${n}.toJSON()`,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return r.push(n),e}}function Ne(e,t){return t}function Se(e,t,n,r){for(var s=[],c=t.length,i=0;i<c;i++)se(t[i].e,s,!0);var l=c>0&&s.length===0&&n!==null;if(l){var g=n.parentNode;oe(g),g.append(n),r.clear(),v(e,t[0].prev,t[c-1].next)}ce(s,()=>{for(var h=0;h<c;h++){var a=t[h];l||(r.delete(a.k),v(e,a.prev,a.next)),le(a.e,!l)}})}function $e(e,t,n,r,s,c=null){var i=e,l={flags:t,items:new Map,first:null};{var g=e;i=b?C(X(g)):g.appendChild(q())}b&&Q();var h=null,a=!1,m=Z(()=>{var o=n();return z(o)?o:o==null?[]:j(o)});P(()=>{var o=A(m),u=o.length;if(a&&u===0)return;a=u===0;let f=!1;if(b){var y=i.data===ee;y!==(u===0)&&(i=L(),C(i),M(!1),f=!0)}if(b){for(var _=null,d,p=0;p<u;p++){if(E.nodeType===8&&E.data===te){i=E,f=!0,M(!1);break}var x=o[p],S=r(x,p);d=G(E,l,_,null,x,S,p,s,t,n),l.items.set(S,d),_=d}u>0&&C(L())}b||be(o,l,i,s,t,r,n),c!==null&&(u===0?h?B(h):h=D(()=>c(i)):h!==null&&ne(h,()=>{h=null})),f&&M(!0),A(m)}),b&&(i=E)}function be(e,t,n,r,s,c,i){var l=e.length,g=t.items,h=t.first,a=h,m,o=null,u=[],f=[],y,_,d,p;for(p=0;p<l;p+=1){if(y=e[p],_=c(y,p),d=g.get(_),d===void 0){var x=a?a.e.nodes_start:n;o=G(x,t,o,o===null?t.first:o.next,y,_,p,r,s,i),g.set(_,o),u=[],f=[],a=o.next;continue}if(Ee(d,y,p),(d.e.f&T)!==0&&B(d.e),d!==a){if(m!==void 0&&m.has(d)){if(u.length<f.length){var S=f[0],w;o=S.prev;var I=u[0],N=u[u.length-1];for(w=0;w<u.length;w+=1)H(u[w],S,n);for(w=0;w<f.length;w+=1)m.delete(f[w]);v(t,I.prev,N.next),v(t,o,I),v(t,N,S),a=S,o=N,p-=1,u=[],f=[]}else m.delete(d),H(d,a,n),v(t,d.prev,d.next),v(t,d,o===null?t.first:o.next),v(t,o,d),o=d;continue}for(u=[],f=[];a!==null&&a.k!==_;)(a.e.f&T)===0&&(m??(m=new Set)).add(a),f.push(a),a=a.next;if(a===null)continue;d=a}u.push(d),o=d,a=d.next}if(a!==null||m!==void 0){for(var $=m===void 0?[]:j(m);a!==null;)(a.e.f&T)===0&&$.push(a),a=a.next;var K=$.length;if(K>0){var V=l===0?n:null;Se(t,$,V,g)}}R.first=t.first&&t.first.e,R.last=o&&o.e}function Ee(e,t,n,r){re(e.v,t),e.i=n}function G(e,t,n,r,s,c,i,l,g,h){var a=(g&ue)!==0,m=(g&fe)===0,o=a?m?ie(s):F(s):s,u=(g&ae)===0?i:F(i);o.debug=()=>{var y=typeof u=="number"?i:u.v;h()[y]};var f={i:u,v:o,k:c,a:null,e:null,prev:n,next:r};try{return f.e=D(()=>l(e,o,u,h),b),f.e.prev=n&&n.e,f.e.next=r&&r.e,n===null?t.first=f:(n.next=f,n.e.next=f.e),r!==null&&(r.prev=f,r.e.prev=f.e),f}finally{}}function H(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,c=e.e.nodes_start;c!==r;){var i=de(c);s.before(c),c=i}}function v(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ce(e,...t){return he(()=>{try{let n=!1;const r=[];for(const s of t)s&&typeof s=="object"&&ge in s?(r.push(ve(s,!0)),n=!0):r.push(s);n&&(pe(e),console.log("%c[snapshot]","color: grey",...r))}catch{}}),t}async function Me(e){const n=await(await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(e)}&count=1&language=de`)).json();if(!n.results||n.results.length===0)throw new Error("Stadt nicht gefunden");return n.results[0]}async function Te(e,t){return await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&current=temperature_2m,relative_humidity_2m,precipitation,wind_speed_10m,weathercode&daily=temperature_2m_max,temperature_2m_min,precipitation_sum&timezone=auto&forecast_days=3`)).json()}async function Ie(e,t,n=7){return await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&hourly=temperature_2m,weathercode,precipitation_probability&daily=temperature_2m_max,temperature_2m_min,precipitation_sum,precipitation_probability_max,weathercode&timezone=auto&forecast_days=${n}`)).json()}function Ae(){return new Promise(e=>{if(!navigator.geolocation){e({latitude:48.2348,longitude:13.8327});return}navigator.geolocation.getCurrentPosition(t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude})},()=>{e({latitude:48.2348,longitude:13.8327})},{timeout:5e3})})}async function Le(e,t){try{const n=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${e}&lon=${t}&format=json&accept-language=de`);if(!n.ok)throw new Error("Standortsuche fehlgeschlagen");const r=await n.json();if(!r||!r.address)throw new Error("Keine Ortsinformationen gefunden");const s=r.address.city||r.address.town||r.address.village||r.address.hamlet||r.address.municipality||r.address.county||"Unbekannter Ort",c=r.address.country||"Unbekanntes Land";return[{name:s,country:c,latitude:parseFloat(e),longitude:parseFloat(t)}]}catch(n){throw console.error("Fehler bei der Standortsuche:",n),n}}function Re(e,t=null){t!==null&&t>15&&([71,73,75,77,80,81,82,85,86].includes(e)&&(e<=77?e=e-20:e=e-19),[56,57,66,67].includes(e)&&(e=e-5));const n={0:{description:"Klar",icon:"☀️",theme:"sunny"},1:{description:"Überwiegend klar",icon:"🌤️",theme:"sunny"},2:{description:"Teilweise bewölkt",icon:"⛅",theme:"partly-cloudy"},3:{description:"Bewölkt",icon:"☁️",theme:"cloudy"},45:{description:"Nebel",icon:"🌫️",theme:"foggy"},48:{description:"Reifnebel",icon:"🌫️",theme:"foggy"},51:{description:"Leichter Nieselregen",icon:"🌦️",theme:"rainy"},53:{description:"Mäßiger Nieselregen",icon:"🌦️",theme:"rainy"},55:{description:"Starker Nieselregen",icon:"🌦️",theme:"rainy"},56:{description:"Leichter gefrierender Nieselregen",icon:"🌧️",theme:"rainy"},57:{description:"Starker gefrierender Nieselregen",icon:"🌧️",theme:"rainy"},61:{description:"Leichter Regen",icon:"🌧️",theme:"rainy"},63:{description:"Mäßiger Regen",icon:"🌧️",theme:"rainy"},65:{description:"Starker Regen",icon:"🌧️",theme:"rainy"},66:{description:"Leichter gefrierender Regen",icon:"🌧️",theme:"rainy"},67:{description:"Starker gefrierender Regen",icon:"🌧️",theme:"rainy"},71:{description:"Leichter Schneefall",icon:"❄️",theme:"snowy"},73:{description:"Mäßiger Schneefall",icon:"❄️",theme:"snowy"},75:{description:"Starker Schneefall",icon:"❄️",theme:"snowy"},77:{description:"Schneegriesel",icon:"❄️",theme:"snowy"},80:{description:"Leichter Schneeregen",icon:"🌨️",theme:"snowy"},81:{description:"Mäßiger Schneeregen",icon:"🌨️",theme:"snowy"},82:{description:"Starker Schneeregen",icon:"🌨️",theme:"snowy"},85:{description:"Leichte Schneeschauer",icon:"🌨️",theme:"snowy"},86:{description:"Starke Schneeschauer",icon:"🌨️",theme:"snowy"},95:{description:"Gewitter",icon:"⛈️",theme:"stormy"},96:{description:"Gewitter mit leichtem Hagel",icon:"⛈️",theme:"stormy"},99:{description:"Gewitter mit starkem Hagel",icon:"⛈️",theme:"stormy"}};if(!n[e]){const r={clear:[0,1],partlyCloudy:[2],cloudy:[3],foggy:[45,48],drizzle:[51,53,55,56,57],rain:[61,63,65,66,67],snow:[71,73,75,77],sleet:[80,81,82],snowShowers:[85,86],thunderstorm:[95,96,99]};for(const[s,c]of Object.entries(r))if(c.some(i=>Math.abs(i-e)<=2)){const i=c.reduce((l,g)=>Math.abs(g-e)<Math.abs(l-e)?g:l);return n[i]}}return n[e]||{description:"Klar",icon:"☀️",theme:"sunny"}}const J=localStorage.getItem("favorites"),ke=J?JSON.parse(J):[],U=me(ke);function Fe(e){U.update(t=>{if(!t.some(r=>r.latitude===e.latitude&&r.longitude===e.longitude)){const r=[...t,e];return localStorage.setItem("favorites",JSON.stringify(r)),r}return t})}function Oe(e){U.update(t=>{const n=t.findIndex(r=>r.latitude===e.latitude&&r.longitude===e.longitude);if(n!==-1){const r=[...t.slice(0,n),...t.slice(n+1)];return localStorage.setItem("favorites",JSON.stringify(r)),r}return t})}function He(e,t){return e.some(n=>n.latitude===t.latitude&&n.longitude===t.longitude)}export{Ae as a,Le as b,Te as c,Fe as d,$e as e,U as f,Re as g,He as h,Ne as i,Ie as j,Me as k,Ce as l,Oe as r};
