import{a7 as K,y as W,C as N,h as S,a8 as P,z as V,i as L,v as Y,A as j,B as M,D as C,J as k,a9 as q,F as H,G as z,I as X,aa as R,ab as D,ac as T,ad as Q,m as Z,ae as A,af as ee,ag as te,ah as ne,ai as re,aj as ie,ak as ae,al as se,am as oe,an as ce,ao as le}from"./YFQpMwCl.js";function ge(t,e){return e}function ue(t,e,n,r){for(var d=[],l=e.length,s=0;s<l;s++)ne(e[s].e,d,!0);var h=l>0&&d.length===0&&n!==null;if(h){var f=n.parentNode;re(f),f.append(n),r.clear(),_(t,e[0].prev,e[l-1].next)}ie(d,()=>{for(var m=0;m<l;m++){var i=e[m];h||(r.delete(i.k),_(t,i.prev,i.next)),ae(i.e,!h)}})}function pe(t,e,n,r,d,l=null){var s=t,h={flags:e,items:new Map,first:null};{var f=t;s=S?N(P(f)):f.appendChild(K())}S&&V();var m=null,i=!1,p=Y(()=>{var a=n();return ee(a)?a:a==null?[]:D(a)});W(()=>{var a=L(p),u=a.length;if(i&&u===0)return;i=u===0;let o=!1;if(S){var b=s.data===j;b!==(u===0)&&(s=M(),N(s),C(!1),o=!0)}if(S){for(var y=null,c,g=0;g<u;g++){if(k.nodeType===8&&k.data===q){s=k,o=!0,C(!1);break}var E=a[g],w=r(E,g);c=B(k,h,y,null,E,w,g,d,e,n),h.items.set(w,c),y=c}u>0&&N(M())}S||de(a,h,s,d,e,r,n),l!==null&&(u===0?m?H(m):m=z(()=>l(s)):m!==null&&X(m,()=>{m=null})),o&&C(!0),L(p)}),S&&(s=k)}function de(t,e,n,r,d,l,s){var h=t.length,f=e.items,m=e.first,i=m,p,a=null,u=[],o=[],b,y,c,g;for(g=0;g<h;g+=1){if(b=t[g],y=l(b,g),c=f.get(y),c===void 0){var E=i?i.e.nodes_start:n;a=B(E,e,a,a===null?e.first:a.next,b,y,g,r,d,s),f.set(y,a),u=[],o=[],i=a.next;continue}if(fe(c,b,g),(c.e.f&R)!==0&&H(c.e),c!==i){if(p!==void 0&&p.has(c)){if(u.length<o.length){var w=o[0],v;a=w.prev;var F=u[0],x=u[u.length-1];for(v=0;v<u.length;v+=1)O(u[v],w,n);for(v=0;v<o.length;v+=1)p.delete(o[v]);_(e,F.prev,x.next),_(e,a,F),_(e,x,w),i=w,a=x,g-=1,u=[],o=[]}else p.delete(c),O(c,i,n),_(e,c.prev,c.next),_(e,c,a===null?e.first:a.next),_(e,a,c),a=c;continue}for(u=[],o=[];i!==null&&i.k!==y;)(i.e.f&R)===0&&(p??(p=new Set)).add(i),o.push(i),i=i.next;if(i===null)continue;c=i}u.push(c),a=c,i=c.next}if(i!==null||p!==void 0){for(var I=p===void 0?[]:D(p);i!==null;)(i.e.f&R)===0&&I.push(i),i=i.next;var J=I.length;if(J>0){var U=h===0?n:null;ue(e,I,U,f)}}T.first=e.first&&e.first.e,T.last=a&&a.e}function fe(t,e,n,r){Q(t.v,e),t.i=n}function B(t,e,n,r,d,l,s,h,f,m){var i=(f&se)!==0,p=(f&oe)===0,a=i?p?Z(d):A(d):d,u=(f&te)===0?s:A(s),o={i:u,v:a,k:l,a:null,e:null,prev:n,next:r};try{return o.e=z(()=>h(t,a,u,m),S),o.e.prev=n&&n.e,o.e.next=r&&r.e,n===null?e.first=o:(n.next=o,n.e.next=o.e),r!==null&&(r.prev=o,r.e.prev=o.e),o}finally{}}function O(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,d=e?e.e.nodes_start:n,l=t.e.nodes_start;l!==r;){var s=ce(l);d.before(l),l=s}}function _(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}async function ye(t){const n=await(await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(t)}&count=1&language=de`)).json();if(!n.results||n.results.length===0)throw new Error("Stadt nicht gefunden");return n.results[0]}async function ve(t,e){return await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&current=temperature_2m,relative_humidity_2m,precipitation,wind_speed_10m,weathercode&daily=temperature_2m_max,temperature_2m_min,precipitation_sum&timezone=auto&forecast_days=3`)).json()}async function _e(t,e,n=7){return await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${e}&hourly=temperature_2m,weathercode,precipitation_probability&daily=temperature_2m_max,temperature_2m_min,precipitation_sum,precipitation_probability_max,weathercode&timezone=auto&forecast_days=${n}`)).json()}function we(){return new Promise(t=>{if(!navigator.geolocation){t({latitude:48.2348,longitude:13.8327});return}navigator.geolocation.getCurrentPosition(e=>{t({latitude:e.coords.latitude,longitude:e.coords.longitude})},()=>{t({latitude:48.2348,longitude:13.8327})},{timeout:5e3})})}async function Se(t,e){try{const n=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${t}&lon=${e}&format=json&accept-language=de`);if(!n.ok)throw new Error("Standortsuche fehlgeschlagen");const r=await n.json();if(!r||!r.address)throw new Error("Keine Ortsinformationen gefunden");const d=r.address.city||r.address.town||r.address.village||r.address.hamlet||r.address.municipality||r.address.county||"Unbekannter Ort",l=r.address.country||"Unbekanntes Land";return[{name:d,country:l,latitude:parseFloat(t),longitude:parseFloat(e)}]}catch(n){throw console.error("Fehler bei der Standortsuche:",n),n}}function be(t,e=null){e!==null&&e>15&&([71,73,75,77,80,81,82,85,86].includes(t)&&(t<=77?t=t-20:t=t-19),[56,57,66,67].includes(t)&&(t=t-5));const n={0:{description:"Klar",icon:"☀️",theme:"sunny"},1:{description:"Überwiegend klar",icon:"🌤️",theme:"sunny"},2:{description:"Teilweise bewölkt",icon:"⛅",theme:"partly-cloudy"},3:{description:"Bewölkt",icon:"☁️",theme:"cloudy"},45:{description:"Nebel",icon:"🌫️",theme:"foggy"},48:{description:"Reifnebel",icon:"🌫️",theme:"foggy"},51:{description:"Leichter Nieselregen",icon:"🌦️",theme:"rainy"},53:{description:"Mäßiger Nieselregen",icon:"🌦️",theme:"rainy"},55:{description:"Starker Nieselregen",icon:"🌦️",theme:"rainy"},56:{description:"Leichter gefrierender Nieselregen",icon:"🌧️",theme:"rainy"},57:{description:"Starker gefrierender Nieselregen",icon:"🌧️",theme:"rainy"},61:{description:"Leichter Regen",icon:"🌧️",theme:"rainy"},63:{description:"Mäßiger Regen",icon:"🌧️",theme:"rainy"},65:{description:"Starker Regen",icon:"🌧️",theme:"rainy"},66:{description:"Leichter gefrierender Regen",icon:"🌧️",theme:"rainy"},67:{description:"Starker gefrierender Regen",icon:"🌧️",theme:"rainy"},71:{description:"Leichter Schneefall",icon:"❄️",theme:"snowy"},73:{description:"Mäßiger Schneefall",icon:"❄️",theme:"snowy"},75:{description:"Starker Schneefall",icon:"❄️",theme:"snowy"},77:{description:"Schneegriesel",icon:"❄️",theme:"snowy"},80:{description:"Leichter Schneeregen",icon:"🌨️",theme:"snowy"},81:{description:"Mäßiger Schneeregen",icon:"🌨️",theme:"snowy"},82:{description:"Starker Schneeregen",icon:"🌨️",theme:"snowy"},85:{description:"Leichte Schneeschauer",icon:"🌨️",theme:"snowy"},86:{description:"Starke Schneeschauer",icon:"🌨️",theme:"snowy"},95:{description:"Gewitter",icon:"⛈️",theme:"stormy"},96:{description:"Gewitter mit leichtem Hagel",icon:"⛈️",theme:"stormy"},99:{description:"Gewitter mit starkem Hagel",icon:"⛈️",theme:"stormy"}};if(!n[t]){const r={clear:[0,1],partlyCloudy:[2],cloudy:[3],foggy:[45,48],drizzle:[51,53,55,56,57],rain:[61,63,65,66,67],snow:[71,73,75,77],sleet:[80,81,82],snowShowers:[85,86],thunderstorm:[95,96,99]};for(const[d,l]of Object.entries(r))if(l.some(s=>Math.abs(s-t)<=2)){const s=l.reduce((h,f)=>Math.abs(f-t)<Math.abs(h-t)?f:h);return n[s]}}return n[t]||{description:"Klar",icon:"☀️",theme:"sunny"}}const $=localStorage.getItem("favorites"),he=$?JSON.parse($):[],G=le(he);function ke(t){G.update(e=>{if(!e.some(r=>r.latitude===t.latitude&&r.longitude===t.longitude)){const r=[...e,t];return localStorage.setItem("favorites",JSON.stringify(r)),r}return e})}function Ee(t){G.update(e=>{const n=e.findIndex(r=>r.latitude===t.latitude&&r.longitude===t.longitude);if(n!==-1){const r=[...e.slice(0,n),...e.slice(n+1)];return localStorage.setItem("favorites",JSON.stringify(r)),r}return e})}function xe(t,e){return t.some(n=>n.latitude===e.latitude&&n.longitude===e.longitude)}export{we as a,Se as b,ve as c,ke as d,pe as e,G as f,be as g,xe as h,ge as i,_e as j,ye as k,Ee as r};
